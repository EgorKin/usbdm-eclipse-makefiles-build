<?xml version="1.0" encoding="UTF-8"
?>
<!DOCTYPE devicePage SYSTEM "_menu.dtd" >
<!-- dma0_base.xml -->

<devicePage xmlns:xi="http://www.w3.org/2001/XInclude" name="_instance" description="Flash Memory Module">

   <constant name="NumChannels" value="16" weak="true"/>

   <aliasOption name="NumChannels" constant="true" 
      description="Number of DMA channels" 
      toolTip="The number of DMA channels available" />

   <irqOption name="irqErrorHandler"  
      description="DMA Error interrupt handler"
      toolTip="This selection allow the interrupt handler for this peripheral to be installed using several different methods"
      pattern="^%b_Error$" 
      classHandler="irqHandler" />
      
   <irqOption name="irqHandlerChannel0"  
      description="Channel 0 interrupt handler"
      toolTip="This selection allow the interrupt handler for this peripheral to be installed using several different methods"
      pattern="^%b0$" 
      classHandler="irq0Handler" />
      
   <irqOption name="irqHandlerChannel1"  
      description="Channel 1 interrupt handler"
      toolTip="This selection allow the interrupt handler for this peripheral to be installed using several different methods"
      pattern="^%b1$" 
      classHandler="irq1Handler" />
      
   <irqOption name="irqHandlerChannel2"  
      description="Channel 2 interrupt handler"
      toolTip="This selection allow the interrupt handler for this peripheral to be installed using several different methods"
      pattern="^%b2$" 
      classHandler="irq2Handler" />
      
   <irqOption name="irqHandlerChannel3"  
      description="Channel 3 interrupt handler"
      toolTip="This selection allow the interrupt handler for this peripheral to be installed using several different methods"
      pattern="^%b3$" 
      classHandler="irq3Handler" />
      
   <template><![CDATA[
       \t//! Class based callback handler has been installed in vector table\n
       \tstatic constexpr bool irqHandlerInstalled = ($(irqErrorHandler) == 1);\n\n
   ]]></template>
       
   <intOption name="irqLevel" 
      description="IRQ Level in NVIC [0-15]"
      toolTip="Sets the priority level used to configure the NVIC"
      value="0" min="0" max="15" 
   />

   <template><![CDATA[
       \t//! Default IRQ level\n
       \tstatic constexpr uint32_t irqLevel =  $(irqLevel);\n\n
   ]]></template>
 
   <validate
      class="net.sourceforge.usbdm.deviceEditor.validators.Validator">
   </validate>

   <template><![CDATA[
      \t// Number of DMA channels implemented
      \tstatic constexpr unsigned NumChannels = $(NumChannels);\n\n
   ]]></template>

   <projectActionList id = "dma_files" >
      <copy source="Project_Headers/dma-MK.h"                   target="Project_Headers/dma.h"                      overwrite="true"  derived="true" />
      <copy source="Snippets/dma-memory-example.cpp"            target="Snippets/dma-memory-example.cpp"            overwrite="true"  derived="true" />
      <copy source="Snippets/dma-memory-template-example.cpp"   target="Snippets/dma-memory-template-example.cpp"   overwrite="true"  derived="true" />
      <copy source="Snippets/dma-uart-example.cpp"              target="Snippets/dma-uart-example.cpp"              overwrite="true"  derived="true" />
      <copy source="Snippets/dma-spi-example.cpp"               target="Snippets/dma-spi-example.cpp"               overwrite="true"  derived="true" />
   </projectActionList>

</devicePage>
