<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
<!DOCTYPE root SYSTEM "../package.dtd"
[
<!ENTITY DEVICE_FAMILY  "MKL">
]>

<root version="1.0" >
   <projectActionList id="CPP-abstraction-common-&DEVICE_FAMILY;">
      <applyWhen>
         <and>
            <deviceSubfamilyMatches>&DEVICE_FAMILY;\d+.*</deviceSubfamilyMatches>
            <variableRef idRef="hasCCNature" condition="isTrue" />
         </and>
      </applyWhen>

      <projectActionList>
         <applyWhen >
            <variableRef idRef="projectOptionValue.CPP-abstraction" />
         </applyWhen>

<!--
         <projectOption id="net.sourceforge.usbdm.cdt.toolchain.optimization.level" config="debug">
            <value>net.sourceforge.usbdm.gnu.c.optimization.level.optimize</value>
         </projectOption>
-->

         <deleteResource target="Project_Headers/Board_LEDs.h" />
         <deleteResource target="Project_Headers/leds.h" />
         <deleteResource target="Sources/leds.cpp" />
         <deleteResource target="Startup_Code/vectors.c" />
         <deleteResource target="Startup_Code/clock.c" />
         <deleteResource target="Startup_Code/console.c" />

         <createFolder   target="Snippets" />
         <excludeSourceFolder target="Snippets" />
	 
         <copy source="Startup_Code/system-gcc.cpp"                        target="Startup_Code/system-gcc.cpp"  replace="true" />
         <copy source="Startup_Code/vectors-cm0.cpp"                       target="Startup_Code/vectors.cpp" macroReplacement="false" />
         <copy source="Startup_Code/console.cpp"                           target="Startup_Code/console.cpp" />

         <copy source="Project_Headers/system.h"                           target="Project_Headers/system.h" replace="true" />

         <copy source="Project_Headers/USBDM_Documentation.h"              target="Project_Headers/USBDM_Documentation.h" />
         <copy source="Project_Headers/hardware.h"                         target="Project_Headers/hardware.h" />
         <copy source="Project_Headers/pcr-&DEVICE_FAMILY;.h"              target="Project_Headers/pcr.h" />
         <copy source="Project_Headers/gpio-&DEVICE_FAMILY;.h"             target="Project_Headers/gpio.h" />

         <copy source="Sources/main.cpp"                                   target="Sources/main.cpp" replace="true" />

         <copy source="projectFiles/Configure.usbdmProject"                target="Configure.usbdmProject" />
      </projectActionList>
   </projectActionList>
</root>
